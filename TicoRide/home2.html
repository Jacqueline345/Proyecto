<!DOCTYPE html>
<html lang="es" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title> TicoRides</title>
    <link rel="stylesheet" href="home2.css">
</head>

<body>
    <section class="principal">
        <div class="imagen">
            <img src="image/logo.avif" alt="logo" style="width: 100px;">
        </div>
        <div class="text">
            <h1>AVENTONES</h1>
        </div>
    </section>
    <section class="principal">
        <div class="container">
            <div class="row">
                <nav class="cont">
                    <a href="home2.html" id="home2" class="nav-link">Home </a>&nbsp;&nbsp;
                    <a href="Ride.html" id="rides" class="nav-link">Rides </a>&nbsp;&nbsp;
                    <a href="Booking.html" id="Bookings" class="nav-link">Bookings </a>&nbsp;&nbsp;
                    <input type="text" class="search-input" placeholder="Search...">&nbsp;&nbsp;
                    <label for="toggle-options" class="user-icon">
                        <img src="image/user_icon.jpg" width="25" alt="user_icon">
                    </label>
                    <input type="checkbox" id="toggle-options" class="toggle-options">
                    <div class="opciones">
                        <button onclick="window.location.href='index.html'" class="boton"> Logout </button>
                        <button onclick="window.location.href='Settings.html'" class="boton"> Settings </button>
                    </div>
                </nav>
            </div>
        </div>
    </section>
    <section class="buscar">
        <div class="container">
            <h1 class="text"> Search rides </h1>
            <p class="line">______________</p>
            <Fieldset>
                <div class="input-container">
                    <p class="from">From</p>
                    <div class="input-group">
                        <select class="inpC" id="dep" name="dep">
                            <option value="SC"> Ciudad Quesada</option>
                            <option value="LF">La Fortuna</option>
                            <option value="AN">Los Àngeles</option>
                            <option value="AG"> Aguas Zarcas </option>
                            <option value="MR"> La marina</option>
                            <option value="Zc"> Zarcero</option>
                            <option value="AL"> Alajuela</option>
                        </select>
                    </div>
                    <p class="to">To</p>
                    <div class="input-group">
                        <select class="inpC" id="arr" name="arr">
                            <option value="Zc"> Zarcero</option>
                            <option value="LF">La Fortuna</option>
                            <option value="AN">Los Àngeles</option>
                            <option value="SC"> Ciudad Quesada</option>
                            <option value="AG"> Aguas Zarcas </option>
                            <option value="MR"> La marina</option>
                            <option value="MR"> Alajuela</option>
                        </select>
                    </div>
                    <button class="btn" id="buscar"> Find Rides </button>
                    <div class="input-container">
                        <p class="Days" id="days" name="days"> Days</p>
                        <input type="checkbox" id="M" class="day-checkbox" name="days">
                        <p>Mon</p>
                        <input type="checkbox" id="T" class="day-checkbox" name="days">
                        <p>Tue</p>
                        <input type="checkbox" id="W" class="day-checkbox" name="days">
                        <p>Wed</p>
                        <input type="checkbox" id="Th" class="day-checkbox" name="days">
                        <p>Thu</p>
                        <input type="checkbox" id="F" class="day-checkbox" name="days">
                        <p>Fri</p>
                        <input type="checkbox" id="S" class="day-checkbox" name="days">
                        <p>Sat</p>
                        <input type="checkbox" id="Su" class="day-checkbox" name="days">
                        <p>Sun</p>
                    </div>
                </div>
            </Fieldset>
            <p>Rides found from <span class="destacado"> Quesada </span> to <span class="destacado"> Zarcero </span></p>
            <table class="table" id="rideTable">
                <tr>
                    <th class="th">Driver</th>
                    <th class="th">From</th>
                    <th class="th">To</th>
                    <th class="th">Seats</th>
                    <th class="th">Car</th>
                    <th class="th">Fee</th>
                    <th class="th">Actions</th>
                </tr>
                <tr>
                    <td class="td"><img src="image/user_icon.jpg" width="20" alt="im"> barroyo</td>
                    <td class="td"><a href="#" class="SC">Quesada</a></td>
                    <td class="td">Alajuela</td>
                    <td class="td">2</td>
                    <td class="td">Nissan Pathfinder 2015</td>
                    <td class="td">$5</td>
                    <td class="td"><a href="Request.html" class="Req">Request</a></td>
                </tr>
                <tr>
                    <td class="td"><img src="image/user_icon.jpg" width="20" alt="im"> barroyo</td>
                    <td class="td"><a href="#" class="SC">Quesada</a></td>
                    <td class="td">Naranjo</td>
                    <td class="td">1</td>
                    <td class="td">Toyota Corolla 2020</td>
                    <td class="td">$10</td>
                    <td class="td"><a href="Request.html" class="Req">Request</a></td>
                </tr>
                <tr>
                    <td class="td"><img src="image/user_icon.jpg" width="20" alt="im"> yluna</td>
                    <td class="td"><a href="#" class="SC">Aguas Zarcas</a></td>
                    <td class="td">Naranjo</td>
                    <td class="td">1</td>
                    <td class="td">Ford Festiva 1990</td>
                    <td class="td">--</td>
                    <td class="td"><a href="Request.html" class="Req">Request</a></td>
                </tr>
                <tbody>

                </tbody>
            </table>
        </div>
    </section>
    <section class="map">
        <div class="mapa">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3925.293019215229!2d-84.43028637251135!3d10.31841842975128!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8fa065f2736779af%3A0xb19fc13e0aae988c!2sUTN%20San%20Carlos!5e0!3m2!1ses!2scr!4v1719871924187!5m2!1ses!2scr"
                width="1010" height="1500" style="border:0;" allowfullscreen="" loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
    </section>
    <div class="container">
        <div class="row">
            <nav>
                <p class="p1">
                    __________________________________________________________________________________________________________________________________________________________
                </p>
                <a href="home2.html" id="home2" class="link">Home |</a>&nbsp;&nbsp;
                <a href="Ride.html" id="rides" class="link">Rides |</a>&nbsp;&nbsp;
                <a href="Booking.html" id="Bookings" class="link">Bookings |</a>&nbsp;&nbsp;
                <a href="Settings.html" class="link">Settings |</a>&nbsp;&nbsp;
                <a href="index.html" class="link">Login |</a>&nbsp;&nbsp;
                <a href="registro.html" class="link">Register </a>&nbsp;&nbsp;
            </nav>
        </div>
    </div>
    <div class="footer">
        <img src="image/c.png" alt="Imagen pequeña">
        <span>Aventones.com</span>
    </div>
    <script src="js/database.js"></script>
    <script src="js/application.js"></script>
    <script>
        function loadTableData() {
            let data = JSON.parse(localStorage.getItem('rideData'));

            if (data && Array.isArray(data) && data.length > 0) {
                const rideTable = document.getElementById('rideTable').getElementsByTagName('tbody')[0];
                if (rideTable) {
                    data.forEach(item => {
                        const driver = item.driver; // Accede al objeto driver
                        const rides = item.rides; // Accede al array de rides

                        rides.forEach(ride => {
                            console.log('Ride:', ride); // Verifica la estructura de cada ride

                            const row = document.createElement('tr');

                            row.innerHTML += `
                        <td>${driver ? driver.fname + ' ' + driver.lname : 'N/A'}</td>
                        <td>${ride.dep || 'N/A'}</td>
                        <td>${ride.arr || 'N/A'}</td>
                        <td>${ride.se || 'N/A'}</td>
                        <td>${ride.make || 'N/A'} ${ride.model || 'N/A'} ${ride.anio || 'N/A'}</td>
                        <td>${ride.fe || 'N/A'}</td>
                        <td><a href="./Request.html?u=${encodeURIComponent(ride.dep)}">Request</a></td>`;
                            rideTable.appendChild(row);
                        });
                    });
                } else {
                    console.error('Element with id "rideTable" not found');
                }
            } else {
                console.error('No valid data found in localStorage');
            }
        }

        loadTableData();

    </script>

</body>

</html>